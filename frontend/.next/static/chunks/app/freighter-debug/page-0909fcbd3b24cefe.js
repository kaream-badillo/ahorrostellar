(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{5281:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(3365),n=s(6182),o=s.n(n);function a(){let e=async()=>{console.log("inject:",typeof window.freighterApi),console.log("isConnected:",await o().isConnected()),console.log("setAllowed:",await o().setAllowed());let e=await o().getAddress();console.log("getAddress:",e),e.address||console.log("requestAccess:",await o().requestAccess()),console.log("getNetworkDetails:",await o().getNetworkDetails())};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"\uD83E\uDDEA Freighter Debug"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("button",{className:"w-full px-8 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-lg",onClick:e,children:"Probar Freighter"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Abre la consola del navegador (F12) y pulsa el bot\xf3n."}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Verificaci\xf3n en Consola:"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm font-mono bg-blue-100 p-3 rounded",children:[(0,t.jsx)("div",{children:'typeof window.freighterApi // "object"'}),(0,t.jsxs)("div",{children:["isConnected: ","{isConnected: true/false}"]}),(0,t.jsxs)("div",{children:["setAllowed: ","{isAllowed: true/false}"]}),(0,t.jsxs)("div",{children:["getAddress: ",'{address: "G..."}']}),(0,t.jsxs)("div",{children:["requestAccess: ",'{address: "G..."}']}),(0,t.jsxs)("div",{children:["getNetworkDetails: ",'{passphrase: "...", rpc: "..."}']})]})]}),(0,t.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-orange-800 mb-3",children:'Si window.freighterApi === "undefined":'}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-orange-700 text-sm",children:[(0,t.jsx)("li",{children:"chrome://extensions/ → Freighter → Enabled=ON"}),(0,t.jsx)("li",{children:"Details → Site access = On all sites"}),(0,t.jsx)("li",{children:"Freighter Settings → Allow localhost:3000"}),(0,t.jsx)("li",{children:"Desbloquea wallet con PIN"}),(0,t.jsx)("li",{children:"Recarga pesta\xf1a (Ctrl+Shift+R)"})]})]})]})]})})})}},5840:(e,r,s)=>{Promise.resolve().then(s.bind(s,5281))},6182:function(e){e.exports=(()=>{"use strict";var e,r,s,t,n={d:(e,r)=>{for(var s in r)n.o(r,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};n.r(o),n.d(o,{WatchWalletChanges:()=>h,addToken:()=>S,default:()=>p,getAddress:()=>_,getNetwork:()=>u,getNetworkDetails:()=>O,isAllowed:()=>R,isBrowser:()=>U,isConnected:()=>w,requestAccess:()=>g,setAllowed:()=>I,signAuthEntry:()=>C,signMessage:()=>N,signTransaction:()=>c}),(e=s||(s={})).CREATE_ACCOUNT="CREATE_ACCOUNT",e.FUND_ACCOUNT="FUND_ACCOUNT",e.ADD_ACCOUNT="ADD_ACCOUNT",e.IMPORT_ACCOUNT="IMPORT_ACCOUNT",e.IMPORT_HARDWARE_WALLET="IMPORT_HARDWARE_WALLET",e.LOAD_ACCOUNT="LOAD_ACCOUNT",e.MAKE_ACCOUNT_ACTIVE="MAKE_ACCOUNT_ACTIVE",e.UPDATE_ACCOUNT_NAME="UPDATE_ACCOUNT_NAME",e.GET_MNEMONIC_PHRASE="GET_MNEMONIC_PHRASE",e.CONFIRM_MNEMONIC_PHRASE="CONFIRM_MNEMONIC_PHRASE",e.CONFIRM_MIGRATED_MNEMONIC_PHRASE="CONFIRM_MIGRATED_MNEMONIC_PHRASE",e.RECOVER_ACCOUNT="RECOVER_ACCOUNT",e.CONFIRM_PASSWORD="CONFIRM_PASSWORD",e.REJECT_ACCESS="REJECT_ACCESS",e.GRANT_ACCESS="GRANT_ACCESS",e.ADD_TOKEN="ADD_TOKEN",e.SIGN_TRANSACTION="SIGN_TRANSACTION",e.SIGN_BLOB="SIGN_BLOB",e.SIGN_AUTH_ENTRY="SIGN_AUTH_ENTRY",e.HANDLE_SIGNED_HW_PAYLOAD="HANDLE_SIGNED_HW_PAYLOAD",e.REJECT_TRANSACTION="REJECT_TRANSACTION",e.SIGN_FREIGHTER_TRANSACTION="SIGN_FREIGHTER_TRANSACTION",e.SIGN_FREIGHTER_SOROBAN_TRANSACTION="SIGN_FREIGHTER_SOROBAN_TRANSACTION",e.ADD_RECENT_ADDRESS="ADD_RECENT_ADDRESS",e.LOAD_RECENT_ADDRESSES="LOAD_RECENT_ADDRESSES",e.LOAD_LAST_USED_ACCOUNT="LOAD_LAST_USED_ACCOUNT",e.SIGN_OUT="SIGN_OUT",e.SHOW_BACKUP_PHRASE="SHOW_BACKUP_PHRASE",e.SAVE_ALLOWLIST="SAVE_ALLOWLIST",e.SAVE_SETTINGS="SAVE_SETTINGS",e.SAVE_EXPERIMENTAL_FEATURES="SAVE_EXPERIMENTAL_FEATURES",e.LOAD_SETTINGS="LOAD_SETTINGS",e.GET_CACHED_ASSET_ICON="GET_CACHED_ASSET_ICON",e.CACHE_ASSET_ICON="CACHE_ASSET_ICON",e.GET_CACHED_ASSET_DOMAIN="GET_CACHED_ASSET_DOMAIN",e.CACHE_ASSET_DOMAIN="CACHE_ASSET_DOMAIN",e.GET_MEMO_REQUIRED_ACCOUNTS="GET_MEMO_REQUIRED_ACCOUNTS",e.ADD_CUSTOM_NETWORK="ADD_CUSTOM_NETWORK",e.CHANGE_NETWORK="CHANGE_NETWORK",e.REMOVE_CUSTOM_NETWORK="REMOVE_CUSTOM_NETWORK",e.EDIT_CUSTOM_NETWORK="EDIT_CUSTOM_NETWORK",e.RESET_EXP_DATA="RESET_EXP_DATA",e.ADD_TOKEN_ID="ADD_TOKEN_ID",e.GET_TOKEN_IDS="GET_TOKEN_IDS",e.REMOVE_TOKEN_ID="REMOVE_TOKEN_ID",e.GET_MIGRATABLE_ACCOUNTS="GET_MIGRATABLE_ACCOUNTS",e.GET_MIGRATED_MNEMONIC_PHRASE="GET_MIGRATED_MNEMONIC_PHRASE",e.MIGRATE_ACCOUNTS="MIGRATE_ACCOUNTS",e.ADD_ASSETS_LIST="ADD_ASSETS_LIST",e.MODIFY_ASSETS_LIST="MODIFY_ASSETS_LIST",e.CHANGE_ASSET_VISIBILITY="CHANGE_ASSET_VISIBILITY",e.GET_HIDDEN_ASSETS="GET_HIDDEN_ASSETS",e.GET_IS_ACCOUNT_MISMATCH="GET_IS_ACCOUNT_MISMATCH",(r=t||(t={})).REQUEST_ACCESS="REQUEST_ACCESS",r.REQUEST_PUBLIC_KEY="REQUEST_PUBLIC_KEY",r.SUBMIT_TOKEN="SUBMIT_TOKEN",r.SUBMIT_TRANSACTION="SUBMIT_TRANSACTION",r.SUBMIT_BLOB="SUBMIT_BLOB",r.SUBMIT_AUTH_ENTRY="SUBMIT_AUTH_ENTRY",r.REQUEST_NETWORK="REQUEST_NETWORK",r.REQUEST_NETWORK_DETAILS="REQUEST_NETWORK_DETAILS",r.REQUEST_CONNECTION_STATUS="REQUEST_CONNECTION_STATUS",r.REQUEST_ALLOWED_STATUS="REQUEST_ALLOWED_STATUS",r.SET_ALLOWED_STATUS="SET_ALLOWED_STATUS",r.REQUEST_USER_INFO="REQUEST_USER_INFO";let a=e=>{let r=Date.now()+Math.random();return window.postMessage({source:"FREIGHTER_EXTERNAL_MSG_REQUEST",messageId:r,...e},window.location.origin),new Promise(s=>{let n=0;e.type!==t.REQUEST_CONNECTION_STATUS&&e.type!==t.REQUEST_PUBLIC_KEY||(n=setTimeout(()=>{s({isConnected:!1,publicKey:""}),window.removeEventListener("message",o)},2e3));let o=e=>{var t,a;e.source===window&&"FREIGHTER_EXTERNAL_MSG_RESPONSE"===(null==(t=null==e?void 0:e.data)?void 0:t.source)&&(null==(a=null==e?void 0:e.data)?void 0:a.messagedId)===r&&(s(e.data),window.removeEventListener("message",o),clearTimeout(n))};window.addEventListener("message",o,!1)})},i={code:-1,message:"Node environment is not supported"},l={code:-1,message:"The wallet encountered an internal error. Please try again or contact the wallet if the problem persists."},E=async()=>{let e;try{e=await a({type:t.REQUEST_ACCESS})}catch(e){console.error(e)}let{publicKey:r}=e||{publicKey:""};return{publicKey:r,error:null==e?void 0:e.apiError}},d=async()=>{let e;try{e=await a({type:t.REQUEST_PUBLIC_KEY})}catch(e){console.error(e)}return{publicKey:(null==e?void 0:e.publicKey)||"",error:null==e?void 0:e.apiError}},A=async()=>{let e;try{e=await a({type:t.REQUEST_NETWORK_DETAILS})}catch(e){console.error(e)}let{networkDetails:r,apiError:s}=e||{networkDetails:{network:"",networkName:"",networkUrl:"",networkPassphrase:"",sorobanRpcUrl:void 0,apiError:""}},{network:n,networkUrl:o,networkPassphrase:i,sorobanRpcUrl:l}=r;return{network:n,networkUrl:o,networkPassphrase:i,sorobanRpcUrl:l,error:s}},T=async()=>{let e;try{e=await a({type:t.REQUEST_ALLOWED_STATUS})}catch(e){console.error(e)}let{isAllowed:r}=e||{isAllowed:!1};return{isAllowed:r,error:null==e?void 0:e.apiError}},_=async()=>{let e="";if(U){let r=await d();return e=r.publicKey,r.error?{address:e,error:r.error}:{address:e}}return{address:e,error:i}},S=async e=>{if(U){let r=await (async e=>{let r;try{r=await a({contractId:e.contractId,networkPassphrase:e.networkPassphrase,type:t.SUBMIT_TOKEN})}catch(e){return{error:l}}return{contractId:r.contractId,error:null==r?void 0:r.apiError}})(e);return r.error?{contractId:"",error:r.error}:{contractId:r.contractId||""}}return{contractId:"",error:i}},c=async(e,r)=>{if(U){let s=await (async(e,r)=>{let s,n,o,i;"object"==typeof r?(n=r.accountToSign,o=r.networkPassphrase):(s=r,n=void 0);try{i=await a({transactionXdr:e,network:s,networkPassphrase:o,accountToSign:n,type:t.SUBMIT_TRANSACTION})}catch(e){return{signedTransaction:"",signerAddress:"",error:l}}let{signedTransaction:E,signerAddress:d}=i;return{signedTransaction:E,signerAddress:d,error:null==i?void 0:i.apiError}})(e,r);return s.error?{signedTxXdr:"",signerAddress:"",error:s.error}:{signedTxXdr:s.signedTransaction,signerAddress:s.signerAddress}}return{signedTxXdr:"",signerAddress:"",error:i}},N=async(e,r)=>{if(U){let{isAllowed:s}=await T();if(!s){let e=await E();if(e.error)return{signedMessage:null,signerAddress:"",error:e.error}}let n=await (async(e,r,s)=>{let n,o=(s||{}).address;try{n=await a({blob:e,accountToSign:o,apiVersion:"5.0.0",networkPassphrase:null==s?void 0:s.networkPassphrase,type:t.SUBMIT_BLOB})}catch(e){return{signedMessage:null,signerAddress:"",error:l}}let{signedBlob:i,signerAddress:E}=n;return{signedMessage:i||null,signerAddress:E,error:null==n?void 0:n.apiError}})(e,0,r);return n.error?{signedMessage:null,signerAddress:"",error:n.error}:{signedMessage:n.signedMessage,signerAddress:n.signerAddress}}return{signedMessage:null,signerAddress:"",error:i}},C=async(e,r)=>{if(U){let{isAllowed:s}=await T();if(!s){let e=await E();if(e.error)return{signedAuthEntry:null,signerAddress:"",error:e.error}}let n=await (async(e,r,s)=>{let n,o=(s||{}).address;try{n=await a({entryXdr:e,accountToSign:o,apiVersion:"5.0.0",networkPassphrase:null==s?void 0:s.networkPassphrase,type:t.SUBMIT_AUTH_ENTRY})}catch(e){return console.error(e),{signedAuthEntry:null,signerAddress:"",error:l}}let{signedAuthEntry:i,signerAddress:E}=n;return{signedAuthEntry:i||null,signerAddress:E,error:null==n?void 0:n.apiError}})(e,0,r);return n.error?{signedAuthEntry:null,signerAddress:"",error:n.error}:{signedAuthEntry:n.signedAuthEntry,signerAddress:n.signerAddress}}return{signedAuthEntry:null,signerAddress:"",error:i}},w=async()=>U?window.freighter?Promise.resolve({isConnected:window.freighter}):(async()=>{let e={isConnected:!1};try{e=await a({type:t.REQUEST_CONNECTION_STATUS})}catch(e){console.error(e)}return{isConnected:e.isConnected}})():{isConnected:!1,error:i},u=async()=>{if(U){let e=await (async()=>{let e;try{e=await a({type:t.REQUEST_NETWORK_DETAILS})}catch(e){console.error(e)}let{networkDetails:r}=e||{networkDetails:{network:"",networkPassphrase:""}};return{network:null==r?void 0:r.network,networkPassphrase:null==r?void 0:r.networkPassphrase,error:null==e?void 0:e.apiError}})();return e.error?{network:"",networkPassphrase:"",error:e.error}:{network:e.network,networkPassphrase:e.networkPassphrase}}return{network:"",networkPassphrase:"",error:i}},O=async()=>{if(U){let e=await A();return e.error?{network:"",networkUrl:"",networkPassphrase:"",error:e.error}:{network:e.network,networkUrl:e.networkUrl,networkPassphrase:e.networkPassphrase,sorobanRpcUrl:e.sorobanRpcUrl}}return{network:"",networkUrl:"",networkPassphrase:"",error:i}},R=async()=>{let e=!1;if(U){let r=await T();return e=r.isAllowed,r.error?{isAllowed:e,error:r.error}:{isAllowed:e}}return{isAllowed:e,error:i}},I=async()=>{let e=!1;if(U){let r=await (async()=>{let e;try{e=await a({type:t.SET_ALLOWED_STATUS})}catch(e){console.error(e)}let{isAllowed:r}=e||{isAllowed:!1};return{isAllowed:r,error:null==e?void 0:e.apiError}})();return e=r.isAllowed,r.error?{isAllowed:e,error:r.error}:{isAllowed:e}}return{isAllowed:e,error:i}},g=async()=>{let e="";if(U){let r=await E();return e=r.publicKey,r.error?{address:e,error:r.error}:{address:e}}return{address:e,error:i}};class h{constructor(e=3e3){this.fetchInfo=async e=>{if(!this.isRunning)return;let r=await d(),s=await A();(r.error||s.error)&&e({address:"",network:"",networkPassphrase:"",error:r.error||s.error}),this.currentAddress===r.publicKey&&this.currentNetwork===s.network&&this.currentNetworkPassphrase===s.networkPassphrase||(this.currentAddress=r.publicKey,this.currentNetwork=s.network,this.currentNetworkPassphrase=s.networkPassphrase,e({address:r.publicKey,network:s.network,networkPassphrase:s.networkPassphrase})),setTimeout(()=>this.fetchInfo(e),this.timeout)},this.timeout=e,this.currentAddress="",this.currentNetwork="",this.currentNetworkPassphrase="",this.isRunning=!1}watch(e){return U?(this.isRunning=!0,this.fetchInfo(e),{}):{error:i}}stop(){this.isRunning=!1}}let U="undefined"!=typeof window,p={getAddress:_,addToken:S,signTransaction:c,signMessage:N,signAuthEntry:C,isConnected:w,getNetwork:u,getNetworkDetails:O,isAllowed:R,setAllowed:I,requestAccess:g,WatchWalletChanges:h};return o})()}},e=>{e.O(0,[347,508,358],()=>e(e.s=5840)),_N_E=e.O()}]);